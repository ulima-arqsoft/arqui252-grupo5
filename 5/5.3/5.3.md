> [5. T√°cticas](../5.md) ‚Ä∫ [5.3. M√≥dulo 3 / Integrante 3](5.3.md)

# 5.3. Gesti√≥n de Planes y Suscripciones / Leonardo Salazar

# Escenarios y Decisiones Arquitect√≥nicas ‚Äì M√≥dulo de Gesti√≥n de Planes y Suscripciones

---

## **Escenario 1 ‚Äì Seguridad en Datos de Pago**

Consideremos el siguiente escenario para **Gesti√≥n de Planes y Suscripciones**:

| Cod Escenario | Atributo de Calidad | Est√≠mulo                                 | Fuente del Est√≠mulo | Artefacto                                  | Entorno                     | Respuesta                              | Medida de Respuesta                    |
|----------------|--------------------|------------------------------------------|----------------------|--------------------------------------------|----------------------------------|----------------------------------------|-----------------------------------------|
| ESC-10         | Seguridad          | Ingreso de datos de pago para suscripci√≥n | Usuario premium      | M√≥dulo de Gesti√≥n de Planes y Suscripciones | Entorno de transacci√≥n segura | Datos cifrados en tr√°nsito y reposo. | Cumplimiento PCI-DSS y 0 filtraciones. |

### **T√°ctica Elegida**
Para alcanzar los niveles de respuesta deseados (cumplimiento **PCI-DSS** y **cero filtraciones**), se elige la t√°ctica de seguridad **‚ÄúEncriptar datos‚Äù**.

---

### **Documentaci√≥n de la Decisi√≥n (ADR)**

#### **T√≠tulo**
Elecci√≥n entre t√°cticas de seguridad para la protecci√≥n de datos de pago en el m√≥dulo de Gesti√≥n de Planes y Suscripciones.

#### **Contexto**
El m√≥dulo de **Gesti√≥n de Planes y Suscripciones** procesa informaci√≥n de pago de usuarios premium durante las transacciones de suscripci√≥n.  
Debido a la naturaleza sensible de estos datos, es necesario cumplir con el est√°ndar **PCI-DSS**, garantizando la confidencialidad e integridad de la informaci√≥n tanto en tr√°nsito como en reposo.  
La arquitectura del sistema se despliega en un entorno seguro en la nube, donde se requiere definir las t√°cticas de seguridad m√°s efectivas para proteger los datos contra accesos no autorizados o manipulaciones maliciosas.

#### **Alternativas**
1. **Encriptar datos**
   - Aplicar cifrado **AES-256** para datos en reposo y **TLS 1.3** para datos en tr√°nsito.  
   - Garantiza la confidencialidad incluso si ocurre una brecha o acceso indebido.  
   - Cumple directamente con los requisitos del est√°ndar **PCI-DSS**.  
   - No afecta la experiencia del usuario, ya que opera de forma transparente.

2. **Autenticar a los actores**
   - Implementar **autenticaci√≥n multifactor (MFA)** para verificar la identidad del usuario antes de permitir cualquier operaci√≥n de pago.  
   - Mejora la seguridad de acceso, pero **no protege los datos** en caso de filtraci√≥n desde el servidor.

3. **Autorizar actores**
   - Aplicar pol√≠ticas de **control de acceso basado en roles (RBAC)** para restringir la manipulaci√≥n de informaci√≥n sensible a usuarios administrativos.  
   - Reduce riesgos de uso indebido interno, aunque **no protege los datos** almacenados o transmitidos.

4. **Verificar integridad de mensajes**
   - Usar **HMAC o firmas digitales** para detectar alteraciones en los mensajes de pago durante la transmisi√≥n.  
   - Protege la integridad, pero no asegura la confidencialidad de la informaci√≥n.

5. **Limitar exposici√≥n**
   - Implementar una **API Gateway** que filtre y oculte endpoints sensibles, reduciendo la superficie de ataque.  
   - Minimiza riesgos externos, pero requiere complementarse con cifrado para proteger el contenido de los datos.

#### **Criterios de Elecci√≥n**
- Cumplimiento de los requisitos **PCI-DSS**.  
- Protecci√≥n de la confidencialidad e integridad de los datos de pago.  
- Impacto m√≠nimo en el rendimiento y la experiencia del usuario.  
- Escalabilidad de la soluci√≥n de seguridad.  
- Facilidad de mantenimiento y auditor√≠a de la configuraci√≥n.

#### **Decisi√≥n**
Se elige la t√°ctica de **Encriptar datos**, acompa√±ada de mecanismos complementarios de **autenticaci√≥n y autorizaci√≥n** para reforzar el control de acceso.

#### **Sustento**
Dado que la informaci√≥n de pago es el activo m√°s cr√≠tico dentro del m√≥dulo, el cifrado garantiza la protecci√≥n de los datos tanto durante su transmisi√≥n como en almacenamiento.  
Esta t√°ctica responde directamente a los lineamientos de **PCI-DSS** y reduce significativamente el riesgo de exposici√≥n ante incidentes de seguridad.  
Aunque implica un ligero incremento en el procesamiento, este impacto es m√≠nimo frente al beneficio de prevenir filtraciones o p√©rdidas de confianza del usuario.

---

## **Escenario 2 ‚Äì Usabilidad en Consulta de Historial**

| Cod Escenario | Atributo de Calidad | Fuente del Est√≠mulo | Est√≠mulo                                           | Artefacto                                  | Entorno          | Respuesta                                 | Medida de Respuesta                     |
|----------------|--------------------|----------------------|----------------------------------------------------|--------------------------------------------|------------------|-------------------------------------------|------------------------------------------|
| ESC-11         | Usabilidad         | Usuario premium      | Consulta historial de pagos o estado de suscripci√≥n | M√≥dulo de Gesti√≥n de Planes y Suscripciones | Sesi√≥n iniciada | Muestra informaci√≥n precisa y legible     | Respuesta < 2 s y 0 errores en carga.    |

### **T√°ctica Elegida**
Para alcanzar el tiempo de respuesta menor a **2 segundos** y **sin errores de carga**, se elige la t√°ctica de usabilidad **‚ÄúMantener el modelo de sistema‚Äù**.

---

### **Documentaci√≥n de la Decisi√≥n (ADR)**

#### **T√≠tulo**
Elecci√≥n entre **Mantener el Modelo de Usuario** vs **Mantener el Modelo de Sistema** para mejorar la interacci√≥n con el historial de pagos.

#### **Contexto**
El m√≥dulo permite a los usuarios revisar su historial de pagos y estado de suscripci√≥n.  
Se busca ofrecer una experiencia **fluida y transparente**, reduciendo la incertidumbre durante las operaciones que involucran tiempos variables de carga, especialmente en **entornos m√≥viles**.

#### **Alternativas**
1. **Mantener el modelo de usuario:** personaliza la interfaz seg√∫n h√°bitos de uso.  
2. **Mantener el modelo de sistema:** muestra **feedback continuo** sobre el estado de las operaciones (barras de progreso, estados de carga, alertas visuales).

#### **Criterios de Elecci√≥n**
- Claridad para el usuario.  
- Facilidad de implementaci√≥n.  
- Impacto en la percepci√≥n de control.  
- Reducci√≥n de errores de interacci√≥n.

#### **Decisi√≥n**
Se elige **Mantener el Modelo de Sistema**.

#### **Sustento**
Esta t√°ctica permite proporcionar **retroalimentaci√≥n visual y en tiempo real** al usuario, mejorando su comprensi√≥n del estado del sistema y reduciendo errores de interacci√≥n.  
Genera **confianza**, mejora la **percepci√≥n de rendimiento** y mantiene una experiencia **consistente y predecible**.

---

## **Escenario 3 ‚Äì Mantenibilidad ante Errores de Facturaci√≥n**

| Cod Escenario | Atributo de Calidad | Fuente del Est√≠mulo | Est√≠mulo                                | Artefacto                                  | Entorno            | Respuesta                                   | Medida de Respuesta          |
|----------------|--------------------|----------------------|------------------------------------------|--------------------------------------------|--------------------|---------------------------------------------|-------------------------------|
| ESC-12         | Mantenibilidad     | Usuario afectado     | Reporta cobro duplicado o error de facturaci√≥n | M√≥dulo de Gesti√≥n de Planes y Suscripciones | Entorno de soporte | Soporte accede a logs y corrige transacci√≥n | Tiempo de resoluci√≥n < 24 h. |

### **T√°ctica Elegida**
Para cumplir con el objetivo de resoluci√≥n en menos de **24 horas**, se elige la t√°ctica de mantenibilidad **‚ÄúEncapsulamiento‚Äù**.

---

### **Documentaci√≥n de la Decisi√≥n (ADR)**

#### **T√≠tulo**
Elecci√≥n entre **Encapsulamiento** vs **Abstracci√≥n de Servicios Comunes** para facilitar la correcci√≥n de errores de facturaci√≥n.

#### **Contexto**
Los errores en transacciones deben resolverse r√°pidamente sin afectar la operaci√≥n del sistema.  
El equipo de soporte necesita acceder a los registros, identificar el m√≥dulo afectado y aplicar correcciones sin generar efectos colaterales en otros servicios.

#### **Alternativas**
1. **Encapsulamiento:** aislar las funciones cr√≠ticas (procesamiento, validaci√≥n y registro de pagos) en clases y servicios separados.  
2. **Abstracci√≥n de servicios comunes:** centralizar operaciones repetitivas en servicios reutilizables.  


#### **Criterios de Elecci√≥n**
- Tiempo de resoluci√≥n.  
- Facilidad para localizar el error.  
- Impacto en otros m√≥dulos.  
- Costo de mantenimiento.

#### **Decisi√≥n**
Se elige **Encapsulamiento** como t√°ctica principal.

#### **Sustento**
Encapsular la l√≥gica de negocio del procesamiento de pagos permite aislar los errores y **corregirlos sin interrumpir otras operaciones**.  
Mejora la **trazabilidad**, facilita las **pruebas unitarias** y acelera la **atenci√≥n de incidencias**, cumpliendo con la meta de resolverlas en menos de 24 horas.

---


[‚¨ÖÔ∏è Anterior](../5.2/5.2.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../5.4/5.4.md)