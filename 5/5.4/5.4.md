> [5. T√°cticas](../5.md) ‚Ä∫ [5.4. M√≥dulo Gesti√≥n de Preferencias de Usuario / Ana Meza](5.4.md)

# 5.4. M√≥dulo Gesti√≥n de Preferencias de Usuario / Ana Meza

## 5.4.1. T√°cticas de Rendimiento

| **Atributo** | **T√°ctica** | **Mecanismo / Implementaci√≥n** | **M√©tricas / SLO** |
|---|---|---|---|
| Rendimiento | Sincronizaci√≥n event-driven | Publicar evento `PreferenceUpdated` (Pub/Sub). Los clientes invalidan cach√© y leen el nuevo snapshot. | Propagaci√≥n cross-device **p75 < 2 s / p95 < 4 s**. |
| Rendimiento | Lecturas r√°pidas con cach√© | Read-through cache (Redis/localStorage) con ETag/versi√≥n del recurso. | Latencia de lectura **< 50 ms** (hit). |
| Rendimiento | Validaci√≥n ligera en cliente | Verificar sliders/rangos antes de enviar (duraci√≥n 10‚Äì120 min, pesos 1‚Äì5). | 0 validaciones rechazadas en backend por formato. |
| Rendimiento | Aplicaci√≥n de reglas en backend | Calcular `target_*` y filtros (idioma/explicit/d√©cadas) en un servicio ligero. | Construcci√≥n de par√°metros **< 100 ms**. |


## 5.4.2. T√°cticas de Usabilidad

| **Atributo** | **T√°ctica** | **Mecanismo / Implementaci√≥n** | **M√©tricas / SLO** |
|---|---|---|---|
| Usabilidad | Presets de experiencia | Perfiles Focus/Workout/Chill que ajustan tempo/energy y pesos por defecto. | Selecci√≥n/ajuste de preset **< 3 s**; satisfacci√≥n ‚â• **90%** en UX tests. |
| Usabilidad | Explicabilidad | Mostrar ‚Äúpor qu√©‚Äù (ej.: ‚Äú‚â•80% 90s y sin expl√≠citos‚Äù). | 100% de pantallas de preferencia con explicaci√≥n visible. |
| Usabilidad | Accesibilidad | Controles WCAG AA, teclado y lector de pantalla para sliders/listas. | Conformidad AA; 0 bloqueos de navegaci√≥n. |
| Usabilidad | Reset r√°pido y deshacer | `Restablecer preferencias` + snackbar ‚ÄúDeshacer‚Äù. | Reset **< 300 ms**; 100% reversible por 10 s. |


## 5.4.3. T√°cticas de Disponibilidad

| **Atributo** | **T√°ctica** | **Mecanismo / Implementaci√≥n** | **M√©tricas / SLO** |
|---|---|---|---|
| Disponibilidad | Degradaci√≥n controlada | Si falla importaci√≥n desde Spotify, mantener edici√≥n manual local sin bloquear flujo. | 100% continuidad del flujo de guardado. |
| Disponibilidad | Idempotencia | `PUT /preferences` con `If-Match: <version>` para evitar escrituras duplicadas. | 0 inconsistencias por doble env√≠o. |
| Disponibilidad | Circuit breaker a externos | Cortar llamadas a proveedor musical/IdP al detectar 5xx/timeout y reintentar con backoff. | √âxito tras reintento ‚â• **99%**; errores visibles a usuario = 0 en p95. |


## 5.4.4. T√°cticas de Mantenibilidad

| **Atributo** | **T√°ctica** | **Mecanismo / Implementaci√≥n** | **M√©tricas / SLO** |
|---|---|---|---|
| Mantenibilidad | Versionado de esquema/contratos | Campos opcionales y defaults; DTO v1/v2; pruebas de contrato. | Cambios sin downtime; 100% backward compatible. |
| Mantenibilidad | Feature flags | Despliegue progresivo de nuevas preferencias (ej.: ‚ÄúPerfiles por franja horaria‚Äù). | Activaci√≥n/rollback **< 1 min**. |
| Mantenibilidad | Config-driven | Pesos/reglas en config central (no c√≥digo). | Ajuste de reglas **< 10 min** sin redeploy. |
| Mantenibilidad | Telemetr√≠a funcional | Eventos `PreferenceViewed/Saved/Imported` con session_id no sensible. | Cobertura de eventos **‚â• 95%** en flujos principales. |


## 5.4.5. T√°cticas de Seguridad y Privacidad

| **Atributo** | **T√°ctica** | **Mecanismo / Implementaci√≥n** | **M√©tricas / SLO** |
|---|---|---|---|
| Privacidad | Minimizaci√≥n + segmentaci√≥n | Guardar solo claves necesarias; separar PII del perfil musical. | 0 exposiciones de PII; inventario de datos actualizado. |
| Seguridad | Cifrado en tr√°nsito y reposo | TLS 1.3; cifrado en DB para registros de preferencias. | 0% tr√°fico sin cifrar; escaneo de cifrado OK. |
| Seguridad | Control de acceso | AuthN/AuthZ (RBAC); scopes: `preferences:read/write`. | 100% de llamadas autenticadas; 0 accesos no autorizados. |
| Cumplimiento | Consentimientos versionados | Registrar/revocar consentimientos (anal√≠tica/marketing). | 100% de cambios auditados con timestamp y actor. |


## üìà Resumen de Metas Clave

- **Sync cross-device:** **p75 < 2 s** (Pub/Sub + cach√©).  
- **Lectura/escritura de preferencias:** **< 100 ms** / **< 150 ms** (p75).  
- **Reglas aplicadas:** duraci√≥n cumple objetivo **¬±10%**; `explicit=OFF` ‚áí **0** pistas expl√≠citas; √©pocas **‚â• 80%**.  
- **Usabilidad:** preset en **< 3 s**, AA cumplido y explicaci√≥n siempre visible.  
- **Disponibilidad:** flujo de edici√≥n/guardado operativo aun con fallas externas; idempotencia garantizada.  
- **Privacidad:** minimizaci√≥n + cifrado; consentimientos auditables.

### Alineaci√≥n con RF-PF (m√≥dulo)

- **RF-PF-01/05/06/07/10:** pesos, variabilidad, presets y temas visuales con versionado y validaci√≥n.  
- **RF-PF-02:** duraci√≥n objetivo aplicada al construir par√°metros; verificaci√≥n previa a generaci√≥n.  
- **RF-PF-03:** `explicit=OFF` ‚Üí excluir tracks con flag expl√≠cito; `language` aplicado en query.  
- **RF-PF-04:** d√©cadas/√©pocas ‚Üí regla **‚â•80%** de coincidencia.  
- **RF-PF-08:** sincronizaci√≥n cross-device basada en eventos.  
- **RF-PF-09:** reset idempotente y reversible.


[‚¨ÖÔ∏è Anterior](../5.3/5.3.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../5.5/5.5.md)