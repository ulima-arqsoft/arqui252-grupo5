> [4. Decisiones Iniciales de Arquitectura](../4.md) ‚Ä∫ [4.2. M√≥dulo Autenticaci√≥n y Usuarios / Pedro Morales](4.2.md)

# Autenticaci√≥n y Usuarios / Pedro Morales

## Decisiones de Asignaci√≥n de Responsabilidades  

### Decisi√≥n 1:

**T√≠tulo**  
- Separaci√≥n del servicio de autenticaci√≥n como m√≥dulo independiente  

**Contexto**  
- El sistema requiere garantizar seguridad, escalabilidad y trazabilidad en los procesos de registro, inicio de sesi√≥n, recuperaci√≥n de cuenta y gesti√≥n de sesiones.  
- Se identific√≥ la necesidad de desacoplar la autenticaci√≥n del resto de la l√≥gica de negocio (generaci√≥n de playlists, preferencias, etc.) para aislar posibles vulnerabilidades.  

**Alternativas**  
- Integrar la autenticaci√≥n dentro del backend general.  
- Usar un servicio externo de autenticaci√≥n (Auth0, Firebase Auth).  
- Implementar un microservicio interno especializado en autenticaci√≥n.  

**Criterios de Elecci√≥n**  
- Control total sobre pol√≠ticas de seguridad y almacenamiento de usuarios.  
- Escalabilidad independiente del core funcional.  
- Capacidad de auditor√≠a y personalizaci√≥n de tokens.  

**Decisi√≥n**  
- **Implementar un microservicio interno de autenticaci√≥n (Auth Service) encargado exclusivamente del registro, login, emisi√≥n y revocaci√≥n de tokens.**  

**Sustento**  
- Permite mantener la seguridad como dominio aislado con control granular de sesiones y auditor√≠a.  
- Facilita la futura integraci√≥n con proveedores externos mediante OAuth 2.0 sin alterar la l√≥gica principal del sistema.  

---

### Decisi√≥n 2:

**T√≠tulo**  
- Asignaci√≥n de responsabilidades entre los servicios de Usuario, Privacidad y Notificaciones  

**Contexto**  
- La aplicaci√≥n gestiona m√∫ltiples aspectos del usuario: autenticaci√≥n, perfil, l√≠nea de tiempo, consentimiento y comunicaci√≥n.  
- Centralizar todas estas responsabilidades en un solo m√≥dulo afectar√≠a la mantenibilidad y la velocidad de respuesta del sistema.  

**Alternativas**  
- Mantener toda la gesti√≥n de usuarios en un √∫nico m√≥dulo monol√≠tico.  
- Dividir las funciones en subm√≥dulos especializados: Auth Service, User Profile Service, Privacy Service y Notification Service.  

**Criterios de Elecci√≥n**  
- Separaci√≥n clara de dominios (Single Responsibility Principle).  
- Sincronizaci√≥n controlada entre servicios.  
- Independencia para despliegues y pruebas por m√≥dulo.  

**Decisi√≥n**  
- **Dividir la responsabilidad del m√≥dulo en cuatro subcomponentes: Auth Service (autenticaci√≥n), User Profile (perfil e historial), Privacy Service (consentimientos) y Notification Service (comunicaci√≥n).**  

**Sustento**  
- Mejora la trazabilidad y el mantenimiento al permitir que cada servicio evolucione de forma independiente.  
- Facilita la identificaci√≥n y resoluci√≥n de fallas en un componente espec√≠fico sin afectar los dem√°s.  

---

### Decisi√≥n 3:

**T√≠tulo**  
- Responsabilidad compartida en seguridad y control de acceso entre Auth Service y API Gateway  

**Contexto**  
- El sistema requiere un nivel alto de protecci√≥n frente a intentos de fuerza bruta, sesiones m√∫ltiples y accesos no autorizados.  
- Los endpoints deben ser protegidos tanto a nivel de token (l√≥gica de negocio) como a nivel de tr√°fico de red.  

**Alternativas**  
- Delegar toda la seguridad al backend.  
- Utilizar un firewall externo sin validaci√≥n de tokens.  
- Implementar una responsabilidad compartida entre Auth Service (validaci√≥n de tokens) y API Gateway (filtrado y rate limiting).  

**Criterios de Elecci√≥n**  
- Reducci√≥n de carga en el backend por validaciones redundantes.  
- Mayor defensa en profundidad (‚Äúdefense in depth‚Äù).  
- Monitoreo centralizado del tr√°fico y detecci√≥n temprana de anomal√≠as.  

**Decisi√≥n**  
- **Establecer una capa doble de seguridad: el API Gateway maneja el rate limiting y WAF, mientras que el Auth Service valida tokens y gestiona el control de sesiones.**  

**Sustento**  
- Se garantiza un control integral de acceso y detecci√≥n temprana de amenazas sin comprometer el rendimiento.  
- Facilita la trazabilidad de eventos de seguridad al centralizar logs y auditor√≠as en el Gateway y el Auth Service.  

---
---

## Decisiones de Modelo de Datos

### Decisi√≥n 1:

**T√≠tulo**
- 

**Contexto**
- 

**Alternativas**
- 

**Criterios de Elecci√≥n**
- 

**Decisi√≥n**
- **a**

**Sustento**
- 
- 
---

### Decisi√≥n 2:

**T√≠tulo**
- 

**Contexto**
- 

**Alternativas**
- 

**Criterios de Elecci√≥n**
- 

**Decisi√≥n**
- **a**

**Sustento**
- 
- 

---

### Decisi√≥n 3:

**T√≠tulo**
- 

**Contexto**
- 

**Alternativas**
- 

**Criterios de Elecci√≥n**
- 

**Decisi√≥n**
- **a**

**Sustento**
- 
- 

--- 
---

## Decisiones de Elecci√≥n de Tecnolog√≠a

### Decisi√≥n 1:

**T√≠tulo**
- 

**Contexto**
- 

**Alternativas**
- 

**Criterios de Elecci√≥n**
- 

**Decisi√≥n**
- **a**

**Sustento**
- 
- 
---

### Decisi√≥n 2:

**T√≠tulo**
- 

**Contexto**
- 

**Alternativas**
- 

**Criterios de Elecci√≥n**
- 

**Decisi√≥n**
- **a**

**Sustento**
- 
- 

---

### Decisi√≥n 3:

**T√≠tulo**
- 

**Contexto**
- 

**Alternativas**
- 

**Criterios de Elecci√≥n**
- 

**Decisi√≥n**
- **a**

**Sustento**
- 
- 

---
---

## Decisiones de Tiempo de Enlace

### Decisi√≥n 1:

**T√≠tulo**
- 

**Contexto**
- 

**Alternativas**
- 

**Criterios de Elecci√≥n**
- 

**Decisi√≥n**
- **a**

**Sustento**
- 
- 
---

### Decisi√≥n 2:

**T√≠tulo**
- 

**Contexto**
- 

**Alternativas**
- 

**Criterios de Elecci√≥n**
- 

**Decisi√≥n**
- **a**

**Sustento**
- 
- 

---

### Decisi√≥n 3:

**T√≠tulo**
- 

**Contexto**
- 

**Alternativas**
- 

**Criterios de Elecci√≥n**
- 

**Decisi√≥n**
- **a**

**Sustento**
- 
- 

---
---

[‚¨ÖÔ∏è Anterior](../4.1/4.1.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../4.3/4.3.md)