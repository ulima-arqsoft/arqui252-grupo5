> [0. Acerca del Grupo](../../0.md) â€º [0.7. Trabajo Individual (Patrones Cloud)](../0.7.md) â€º [0.7.2. Integrante 2](0.7.2.md)

# 0.7.2. Pedro Morales

## ğŸ§‘ğŸ»â€ğŸ’» Desarrollo Conceptual

### Â¿QuÃ© es el PatrÃ³n Bulkhead?

El patrÃ³n **Bulkhead** (o **CompartimentaciÃ³n Aislada**) es un diseÃ±o arquitectÃ³nico que consiste en **dividir la aplicaciÃ³n en compartimentos independientes**, de manera que si una parte falla o se sobrecarga, **el resto del sistema continÃºe funcionando con normalidad**.

El nombre proviene de la estructura de los barcos, donde el casco se divide en secciones selladas para evitar que una filtraciÃ³n hunda toda la nave.

Aplicado al software, Bulkhead ayuda a:

- **Reducir el impacto de fallos internos o externos.**
- **Evitar fallas en cascada** entre mÃ³dulos o servicios.
- **Mantener disponibilidad parcial** incluso bajo condiciones de error o carga alta.

### Objetivos

- **Aislar recursos crÃ­ticos:** Evitar que un servicio consuma todos los recursos disponibles.
- **Evitar colapsos totales:** Permitir que el sistema siga funcionando aun si un mÃ³dulo falla.
- **Garantizar continuidad de operaciones:** Mantener funcionalidad esencial bajo estrÃ©s.
- **Mejorar resiliencia:** El sistema responde mejor ante fallas externas o intermitentes.
- **Soportar picos de carga:** Los servicios crÃ­ticos tienen prioridad en el uso de recursos.

### Arquitectura del PatrÃ³n (equivalente a una pirÃ¡mide conceptual)

| Capa / Nivel | QuÃ© Representa | Ejemplo Aplicado |
|-------------|---------------|----------------|
| **Compartimentos (Base)** | SeparaciÃ³n fÃ­sica o lÃ³gica de recursos | Pool independiente para Pagos |
| **LimitaciÃ³n de Concurrencia** | DefiniciÃ³n de cuÃ¡ntas peticiones se procesan | LÃ­mite de 10 hilos para reservas simultÃ¡neas |
| **Fallback / Continuidad Parcial** | Mantener funciones disponibles incluso en falla | Notificaciones pueden retrasarse sin problema |
| **SupervisiÃ³n y Monitoreo** | Alertas, mÃ©tricas y logs por compartimento | MÃ©tricas por servicio en Azure Monitor o Grafana |

> **Regla:** Los servicios crÃ­ticos deben estar **siempre aislados** de los servicios de soporte.

### MÃ©tricas Clave

- **Tasa de SaturaciÃ³n de Recursos:** Nivel de uso por pool o contenedor.
- **Tiempo de Respuesta por Servicio:** Permite identificar cuellos de botella.
- **Tasa de Fallas Aisladas:** Indica si la compartimentaciÃ³n estÃ¡ funcionando.
- **Disponibilidad Parcial:** Porcentaje de la aplicaciÃ³n que permanece operativa durante fallas.
- **MTTR:** Tiempo promedio para recuperar un compartimento afectado.

### Criterios para DiseÃ±ar con Bulkhead

- **Identificar servicios crÃ­ticos:** Â¿QuÃ© debe seguir funcionando sÃ­ o sÃ­?
- **Separar recursos por servicio:** Conexiones, hilos, contenedores.
- **Evaluar carga esperada:** Permite definir lÃ­mites de concurrencia reales.
- **Monitorear continuamente:** Detectar temprano saturaciÃ³n o fallos.
- **Combinar con otros patrones:** Circuit Breaker, Retry y Throttling aumentan resiliencia.

## ğŸ‘¾ Consideraciones TÃ©cnicas

En tÃ©rminos prÃ¡cticos, Bulkhead es:

- Dividir el sistema en secciones independientes.
- Si una secciÃ³n falla, solo esa parte se ve afectada.
- Mantiene el resto del sistema funcionando sin problemas.
- Ejemplo: Si el servicio de pagos falla, el catÃ¡logo y las reservas siguen operando.

Como analogÃ­a es como compartimentar un barco: "*Si una secciÃ³n se llena de agua, no se hunde todo el barco*".

Estas consideraciones estÃ¡n pensadas para **equipos que comienzan con arquitectura de microservicios** y buscan mejorar **resiliencia en entornos cloud**.

---
---

## 1. Requisitos Previos

Antes de comenzar, necesitas instalar lo siguiente:

1. **Node.js**  
   - Es un entorno de ejecuciÃ³n para JavaScript.  
   - DescÃ¡rgalo desde [https://nodejs.org](https://nodejs.org) e instala la versiÃ³n recomendada.  
   - Para verificar que estÃ¡ instalado, abre una terminal y ejecuta:
     ```bash
     node -v
     npm -v
     ```

2. **Editor de cÃ³digo**  
   - Se recomienda **Visual Studio Code (VSCode)**.  
   - DescÃ¡rgalo desde [https://code.visualstudio.com](https://code.visualstudio.com).

## 2. Crear el Proyecto

1. Abre la terminal o PowerShell.
2. Crea una carpeta y navega a ella:
   ```bash
   mkdir bulkhead-demo
   cd bulkhead-demo
    ```
3. Inicializa el Proyecto en Node.js
    ```bash
   npm init -y
    ```

## 3. Instalar **Express, EJS y Bottleneck**

1. Instala Express (servidor web) y Bottleneck (para manejar la concurrencia y simular el patrÃ³n Bulkhead):
    ```bash
    npm install express bottleneck
    ```
2. Instala EJS (motor de plantillas):
    ```bash
    npm install ejs
    ```

## 4. Estructura de Carpetas Recomendada

    bulkhead-demo/
    â”œâ”€â”€ public/               
    â”‚   â””â”€â”€ styles.css  
    â”œâ”€â”€ services/              
    â”‚   â”œâ”€â”€ catalogService.js
    â”‚   â”œâ”€â”€ paymentService.js
    â”‚   â””â”€â”€ reservationService.js
    â”œâ”€â”€ views/                 
    â”‚   â”œâ”€â”€ index.ejs          
    â”‚   â”œâ”€â”€ catalog.ejs        
    â”‚   â”œâ”€â”€ payment.ejs    
    â”‚   â””â”€â”€ reservation.ejs   
    â”œâ”€â”€ server.js           
    â””â”€â”€ package.json

## 5. Configura tu Servidor Principal 

Configurar Express, EJS y las rutas para los servicios de catÃ¡logo, pago y reserva:

- server.js

![alt text](image.png)

## 6. Configura tu Servicios

- catalogService.js

![alt text](image-1.png)

- paymentService.js

![alt text](image-2.png)

- reservationService.js

![alt text](image-3.png)

## 7. Plantear las Vistas EJS

- catalogService.js

![alt text](image-4.png)

- paymentService.js

![alt text](image-5.png)

- reservationService.js

![alt text](image-6.png)

- index.ejs

![alt text](image-7.png)

## 8. Ejecutar el Proyecto

Ejecuta el servidor con el siguiente comando:
    
    node server.js


Abre tu navegador y accede a las rutas:

- PÃ¡gina principal: http://localhost:3000/
    
    - CatÃ¡logo: http://localhost:3000/catalogo
    
    - Pago: http://localhost:3000/pago
    
    - Reserva: http://localhost:3000/reserva

---

## ğŸ‘¾ Demo CÃ³digo

Link de Github del Proyecto:
https://github.com/PedroM48/arq-individual02-pedro.git

--- 

[â¬…ï¸ Anterior](../0.7.1/0.7.1.md) | [ğŸ  Home](../../../README.md) | [Siguiente â¡ï¸](../0.7.3/0.7.3.md)