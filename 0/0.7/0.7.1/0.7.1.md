> [0. Acerca del Grupo](../../0.md) ‚Ä∫ [0.7. Trabajo Individual (Patrones Cloud)](../0.7.md) ‚Ä∫ [0.7.1. Integrante 1](0.7.1.md)

# 0.7.1. Crisbeth Sovero

## üßëüèª‚Äçüíª Desarrollo Conceptual

### ¬øQu√© es el Patr√≥n Sidecar?
El patr√≥n Sidecar es un patr√≥n de dise√±o arquitect√≥nico com√∫nmente usado en microservicios y sistemas distribuidos, donde una aplicaci√≥n principal se complementa con un componente auxiliar llamado "sidecar". Este sidecar se ejecuta en un proceso o contenedor separado, pero junto a la aplicaci√≥n principal, para manejar funcionalidades adicionales como monitoreo, logging, seguridad o gesti√≥n de red. Esto permite que la aplicaci√≥n principal permanezca ligera y enfoque s√≥lo su l√≥gica de negocio, mientras el sidecar gestiona tareas de infraestructura o soporte.


### Objetivos
- Desacoplar funcionalidades auxiliares de la aplicaci√≥n principal

- Mejorar modularidad y mantenibilidad del sistema

- Permitir escalabilidad independiente del componente auxiliar

- Facilitar la reutilizaci√≥n de componentes comunes (monitoreo, logging)

- Reducir la complejidad del c√≥digo de negocio principal


### Arquitectura del Patr√≥n 

| Capa / Nivel | Qu√© Representa | Ejemplo Aplicado |
|-------------|---------------|----------------|
| Contenedor Principal (Host)	| La aplicaci√≥n o servicio de negocio.	| El microservicio de Reservas escrito en Node.js.|
| Contenedor Sidecar	| El proceso o contenedor auxiliar acoplado.|	Un agente de monitoreo que recolecta m√©tricas y logs del servicio de Reservas.|
| Recursos Compartidos (Base)	|La red local (localhost) y el ciclo de vida.|	Ambos contenedores comparten el mismo Pod de Kubernetes o m√°quina virtual.|
| Comunicaci√≥n	| Interacci√≥n entre el Sidecar y la aplicaci√≥n principal.| El servicio de Reservas env√≠a logs al Sidecar a trav√©s de una interfaz de loopback |(localhost).|

> 

### M√©tricas Clave
- Latencia del Sidecar: El tiempo que tarda el Sidecar en procesar una solicitud (ej: enviar un log a un sistema centralizado).

- Uso de Recursos: CPU y memoria consumida por el contenedor Sidecar (importante para asegurar que no estrangule al principal).

- Tasa de √âxito/Error de las Funciones Auxiliares: Porcentaje de logs enviados exitosamente, o de llamadas de seguridad validadas correctamente.



### Criterios para

## üëæ Consideraciones T√©cnicas
En t√©rminos pr√°cticos, Sidecar es:

Una t√©cnica de despliegue donde dos o m√°s contenedores se empaquetan y ejecutan juntos en una unidad de computaci√≥n compartida. Para entornos de desarrollo y demostraci√≥n local, esto se consigue usando Docker Compose.
Estas consideraciones est√°n pensadas para demostrar c√≥mo el patr√≥n logra el desacoplamiento y la reutilizaci√≥n en un entorno de contenedores distribuido.

Como analog√≠a es como compartimentar una motocicleta, un compartimento adjunto que a√±ade funcionalidades sin modificar la estructura principal del veh√≠culo.

## Requisitos Previos

Antes de comenzar, necesitas instalar lo siguiente:

1. **Node.js**  
   - Es un entorno de ejecuci√≥n para JavaScript.  
   - Desc√°rgalo desde [https://nodejs.org](https://nodejs.org) e instala la versi√≥n recomendada.  
   - Para verificar que est√° instalado, abre una terminal y ejecuta:
     ```bash
     node -v
     npm -v
     ```

2. **Editor de c√≥digo**  
   - Se recomienda **Visual Studio Code (VSCode)**.  
   - Desc√°rgalo desde [https://code.visualstudio.com](https://code.visualstudio.com).
     
3. **Docker Desktop (o motor Docker)**

   - Necesario para construir y ejecutar los contenedores.

4. **Docker Compose**
   - Una herramienta para definir y ejecutar aplicaciones multi-contenedor. (Viene incluido en Docker Desktop).

## 2. Crear el Proyecto

1.  Crea la carpeta y navega a ella:
    ```bash
    mkdir sidecar-demo
    cd sidecar-demo
    ```
2.  Inicializa el Proyecto Base (ej. Node.js):
    ```bash
    npm init -y
    npm install express axios # Instalaci√≥n de dependencias 
    ```
## Estructura de Carpetas Recomendada
```bash
sidecar-demo/
‚îú‚îÄ‚îÄ node_modules/
‚îú‚îÄ‚îÄ server-app.js        # ‚¨ÖÔ∏è El Servicio Principal
‚îú‚îÄ‚îÄ Dockerfile.app       # ‚¨ÖÔ∏è Dockerfile para el Host
‚îú‚îÄ‚îÄ sidecar-log.js       # ‚¨ÖÔ∏è El Servicio Sidecar (el Agente)
‚îú‚îÄ‚îÄ Dockerfile.sidecar   # ‚¨ÖÔ∏è Dockerfile para el Sidecar
‚îî‚îÄ‚îÄ docker-compose.yml   # ‚¨ÖÔ∏è Manifiesto clave para la co-ubicaci√≥n
```

## Configuraci√≥n Clave del Despliegue con Docker Compose

La magia del Sidecar con Docker Compose reside en la configuraci√≥n de `network_mode`, que permite que el **Sidecar** use el mismo espacio de red (incluyendo `localhost`) que el **Servicio Principal**.

### Estructura del Archivo `docker-compose.yml`

```yaml
version: '3.8'
services:
  # 1. El Servicio Principal (Host)
  main-app:
    build:
      context: .
      dockerfile: Dockerfile.app
    ports:
      - "3000:3000" # Puerto visible para el exterior
      
  # 2. El Sidecar Agent (Servicio Auxiliar)
  sidecar-agent:
    build:
      context: .
      dockerfile: Dockerfile.sidecar
    # Configuraci√≥n CLAVE: El Sidecar usa la red del contenedor 'main-app'.
    # Esto habilita la comunicaci√≥n entre ambos v√≠a localhost.
    network_mode: "service:main-app" 
    # No se requiere mapear puertos al exterior para el Sidecar,
    # solo el 'main-app' debe acceder a √©l.
```


## üëæ Demo C√≥digo

Link de Github del Proyecto:https://github.com/CrissSov/Sidecar-pattern.git


--- 

[‚¨ÖÔ∏è Anterior](../0.7.1/0.7..md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../0.7.3/0.7.3.md)
