# 2.3. Restricciones

## Módulo 2: Autenticación y Usuarios / Pedro Morales
- Agregar y verificar las restricciones conforme lo tratado al resto de módulos
- Revisar las restricciones 1 y 2 más que todo, lo demás parece ok (Pedro)

### 1. **Seguridad en el Almacenamiento de Datos Sensibles**
- **Almacenamiento Seguro:** 
  - Los datos sensibles, como contraseñas, tokens de sesión y credenciales, deben almacenarse de forma segura utilizando `flutter_secure_storage` o una solución de almacenamiento seguro compatible con Flutter.
  - No se debe almacenar información sensible en texto plano ni en almacenamiento accesible (ej. `shared_preferences` sin cifrado).

---

### 2. **Manejo de Redes Sociales (OAuth)**
- **Integración con OAuth:**
  - Las plataformas de autenticación social (Google, Facebook, Apple, Spotify) deben integrarse de forma eficiente con Flutter mediante paquetes como `flutter_facebook_auth`, `google_sign_in` y `flutter_auth`.
  - **Flujos de Redirección:** Asegúrate de que los flujos de autenticación externa sean rápidos y sin errores, manejando las redirecciones entre Flutter y los proveedores correctamente.
  
- **Permisos y Autorizaciones:**
  - La aplicación debe gestionar correctamente los permisos solicitados a los usuarios para acceder a sus perfiles en plataformas sociales, y debe permitirles revocar dichos permisos si así lo desean.

---

### 3. **Rendimiento y Tiempos de Respuesta**
- **Optimización del Inicio de Sesión:**
  - El inicio de sesión (tanto manual como a través de redes sociales) debe ser rápido, con tiempos de respuesta menores a 2 segundos, independientemente de la calidad de la conexión a la red.
  - La interfaz de usuario debe mantenerse fluida durante la validación de credenciales, sin mostrar bloqueos o retrasos evidentes.

- **Recuperación de Contraseña:**
  - El sistema debe enviar un enlace de recuperación de contraseña rápidamente (en menos de 1 minuto), y la pantalla de notificación en Flutter debe ser clara y eficiente.

---

### 4. **Autenticación Multifactor (2FA)**
- **Integración con 2FA:**
  - La implementación de autenticación de dos factores (2FA) debe funcionar correctamente en dispositivos iOS y Android. Los códigos deben enviarse en menos de 1 minuto y deben ser válidos solo durante un corto periodo (por ejemplo, 5 minutos).
  - Los códigos de 2FA deben almacenarse de forma temporal y nunca en texto claro.

---

### 5. **Gestión de Sesiones**
- **Expiración de Sesiones:**
  - Las sesiones deben caducar después de 30 minutos de inactividad y forzar al usuario a iniciar sesión nuevamente.
  - El sistema debe manejar múltiples dispositivos activos y permitir al usuario gestionar y cerrar sesiones desde la aplicación sin complicaciones.

- **Cierre de Sesión:**
  - El proceso de cierre de sesión debe ser rápido y asegurar que todos los dispositivos en los que el usuario está autenticado sean desconectados correctamente. Flutter debe manejar esto sin errores.

---

### 6. **Interfaz de Usuario y Experiencia (UI/UX)**
- **Fluidez de la Interfaz:**
  - Flutter debe garantizar una experiencia de usuario fluida y sin interrupciones al cambiar entre pantallas (por ejemplo, entre el registro, inicio de sesión, recuperación de contraseña y 2FA).
  - Las notificaciones deben ser claras y fáciles de entender, sin generar confusión. Los mensajes de error deben proporcionar soluciones claras y permitir que el usuario rectifique rápidamente los problemas.

- **Manejo de Errores:**
  - Si ocurre un error (por ejemplo, en la verificación de credenciales o en la autenticación social), Flutter debe mostrar mensajes de error informativos que permitan al usuario corregir la acción sin perder el progreso.

---

### 7. **Sincronización de Datos**
- **Sincronización en Tiempo Real:**
  - Los cambios en las preferencias de privacidad y las configuraciones del perfil deben reflejarse en tiempo real en la aplicación.
  - Flutter debe asegurarse de que cualquier cambio realizado en las configuraciones del usuario (como visibilidad de playlists o historial de actividad) se sincronice con el backend de forma eficiente.

---

### 8. **Compatibilidad Entre Plataformas (iOS y Android)**
- **Uniformidad entre Plataformas:**
  - Todos los flujos de autenticación, como inicio de sesión, recuperación de contraseña y 2FA, deben funcionar de manera consistente tanto en dispositivos **Android** como **iOS**.
  - El diseño debe ser responsivo y adaptarse a diferentes tamaños de pantalla sin comprometer la experiencia del usuario.

---

### 9. **Notificaciones Push y Actualizaciones en Tiempo Real**
- **Soporte para Notificaciones Push:**
  - Las notificaciones push deben integrarse correctamente con servicios como **Firebase Cloud Messaging (FCM)** en Flutter para alertar al usuario sobre eventos importantes (como 2FA o cambios de configuración de privacidad).
  - La gestión de notificaciones debe garantizar que el usuario no reciba mensajes repetitivos ni desactualizados.

---

### 10. **Accesibilidad y Usabilidad**
- **Cumplimiento de Estándares de Accesibilidad:**
  - La aplicación debe ser accesible, permitiendo a los usuarios con discapacidades navegar por la aplicación de manera eficiente (cumpliendo con los estándares WCAG).
  - Asegúrate de que todos los formularios, botones y campos sean fáciles de leer y usar, especialmente para personas con discapacidades visuales o motrices.

---

### Consideraciones Técnicas Adicionales:
- **Caché y Persistencia Local:**
  - Los datos de sesión y las credenciales de usuario deben ser almacenados en caché de manera segura, pero también debe tener un mecanismo para limpiar los datos de manera eficiente si la sesión caduca o el usuario cierra sesión.
  
- **Validación de Conexión y Red:**
  - En caso de fallos de conexión o problemas con la red, la aplicación debe manejar los errores de manera eficiente y permitir que el usuario reintente las acciones, sin perder información importante (como formularios incompletos).
