# 2.1.6. Lista Consolidado

## 🗂️ Tabla de Requisitos (resumen)



## 🔔 Eventos (Dominio)
- `EmotionDetected{userId, emotion, confidence, source, ts}`
- `PlaylistRequested{userId, emotion, prefs, targetDuration}`
- `PlaylistGenerated{playlistId, seed, features, tracks[]}`
- `PlaylistSaved{playlistId, provider, providerId}`
- `SubscriptionUpdated{userId, plan, status}`
- `ProviderTokenRefreshed{userId, provider}`
- `PreferenceChanged{userId, key, value}`

## 👤 Historias de Usuario (muestras)
- **HU-01:** Como usuario, quiero generar una playlist desde mi selfie para escuchar música alineada a mi estado de ánimo.  
  - **Criterios:** ver emoción y confianza; pre-escucha; cambiar pistas; guardar en Spotify.
- **HU-02:** Como usuario sin Spotify, quiero seleccionar emoción y escuchar un preview in-app para decidir luego conectar mi cuenta.
- **HU-03:** Como usuario Premium, quiero ver estadísticas emocionales semanales/mensuales y exportarlas.

## 📏 Reglas de Negocio
- **RN-01:** Contenido explícito bloqueado si el toggle está OFF.  
- **RN-02:** Free máx. 2 playlists/día; Premium ilimitado.  
- **RN-03:** Las playlists se crean privadas por defecto.

## 🔌 Integraciones (v1)
- **Spotify Web API:** auth, recommendations, playlists, tracks, me/top.  
- **Pasarela de pago:** tokenización y webhooks de cobro.

## 📊 Métricas clave
- **p75** tiempo de generación < 2.5 s (sin exportar).  
- **Completion rate** de playlist > 45%.  
- **Reconexión de token** < 3% semanal.  
- **Conversión Free→Premium** ≥ 4% mensual (objetivo).