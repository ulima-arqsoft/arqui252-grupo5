# 2.1.1. Módulo 1

## Generación de Playlist / Crisbeth Sovero

### 🎯 Alcance
Detectar emoción (selfie o selección manual), mapearla a parámetros musicales y generar una playlist personalizada; guardar el resultado y permitir compartir.

### 🌀 Supuestos
La 1ra versión usa Spotify como proveedor principal.

El modelo de emoción trabaja on-device o en backend y devuelve una de las clases: feliz, triste, calmado, enérgico, melancólico, ansioso, neutro (ajustable).

### 🤖 Requisitos Funcionales

#### RF-PL-01 Ingesta de selfie
El sistema permite tomar/cargar selfie y obtiene la emoción principal.

- **Aceptación**: dado que el usuario autoriza cámara/galería, cuando captura/carga una imagen válida, entonces el sistema devuelve una emoción en <2s (p75) y muestra etiqueta + confianza.

---

#### RF-PL-02 Selección manual de emoción
El usuario puede elegir su estado de ánimo desde un selector.

- **Aceptación**: al elegir una emoción, el sistema salta el análisis de imagen y continúa al mapeo musical.

---

#### RF-PL-03 Normalización de emoción
El sistema traduce la emoción a parámetros musicales (tempo, energy, valence, danceability, acousticness).

- **Aceptación**: dado feliz, entonces valence ≥ 0.7, energy ≥ 0.6 (rango configurable).

---

#### RF-PL-04 Reglas por preferencia
El sistema aplica filtros por géneros favoritos, idioma, década, duración objetivo.

- **Aceptación**: si el usuario fijó 30 min y rock/indie, la lista resultante cumple duración ±10% y ≥80% de tracks en esos géneros.

---

#### RF-PL-05 Semilla híbrida
Generación usa mezcla de: emoción → features + top artists/genres del usuario (si autorizó Spotify) + pistas trending del país.

- **Aceptación**: la playlist contiene ≥60% recomendaciones basadas en features y ≥20% basadas en historial si existe.

---

#### RF-PL-06 Pre-escucha y edición rápida
Antes de guardar, el usuario puede reproducir 30s y sustituir una pista por otra sugerida.

- **Aceptación**: al pulsar “Cambiar”, el sistema ofrece ≥5 alternativas compatibles.

---

#### RF-PL-07 Guardado y versionado
Cada generación crea un snapshot con emoción, hora, parámetros y seed tracks.

- **Aceptación**: la playlist queda guardada en el historial con ID único y exportable a Spotify.

---

#### RF-PL-08 Re-generación inteligente
Botón “Re-intentar” recalcula con variación de semillas ±15% para diversificar.

- **Aceptación**: ≥70% de las pistas cambian respecto a la versión previa.

---

#### RF-PL-09 Compartir social
Genera cover (arte + emoción + código QR/Deep Link) y texto pre-armado.

- **Aceptación**: compartir disponible para IG Stories, TikTok, X, WhatsApp.

---

#### RF-PL-10 Manejo de errores
Si falla la detección, el flujo ofrece selección manual sin perder el progreso.

- **Aceptación**: el usuario siempre puede completar la generación.

---

#### RF-PL-11 Límite por plan
Free: hasta 2 playlists/día; Premium: ilimitado.

- **Aceptación**: al exceder cuota, se muestra CTA a upgrade.

---

#### RF-PL-12 Telemetría ética
Se registra (anonimizado): emoción, duración, skips, completion rate.

- **Aceptación**: datos se asocian a un session_id no sensible.

---

#### RF-PL-13 Multimodal visual
UI cambia fondo/animación según emoción (experiencia audiovisual).

- **Aceptación**: cada emoción tiene un tema visual asignado.

---

#### RF-PL-14 Seed local
Considera mood + contexto horario (mañana/tarde/noche) y clima (futuro) para ajustar tempo/energy.

- **Aceptación**: por la noche, energía base -10% salvo “fiesta/energético”.