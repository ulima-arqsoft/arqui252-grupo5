> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../../9.md) ‚Ä∫ [9.4. Iteraci√≥n 3: Refinar estructuras para abordar el atributo de calidad m√°s importante](../9.4.md) ‚Ä∫ [9.4.5. Vistas y Decisiones](9.4.5.md)

# 9.4.5. Vistas y Decisiones

## Vista de M√≥dulos (L√≥gica - Flujo Cr√≠tico de Calidad)

El foco est√° en el flujo que afecta la consistencia y la seguridad:

- **Consulta de Permiso:**  
  El Cliente llama al **API Gateway**. Este consulta el **Subscription-Service** (`CheckPermission`) para validar el l√≠mite de playlists/d√≠a.

- **Generaci√≥n:**  
  Si el permiso es otorgado, se ejecuta el **flujo de playlist** de la Iteraci√≥n 2.

- **Registro Consistente:**  
  El **Playlist-Engine** publica un evento `Playlist_Created` a **RabbitMQ**.

- **Almacenamiento Inmutable:**  
  El **Journal-Service** consume el evento de RabbitMQ y almacena el registro completo e inmutable en su base de datos (**PostgreSQL/JSONB**), cumpliendo con **CRN02**.

---

## Vista de Despliegue (F√≠sica - Cierre de Calidad)

Se a√±aden contenedores y servicios gestionados al cl√∫ster existente:

- Contenedores para **Subscription-Service** y **Journal-Service**.  
- Refuerzo de la **replicaci√≥n de PostgreSQL y/o Redis** para alta disponibilidad de estos servicios cr√≠ticos (**CRN04**).  
- Implementaci√≥n de un **servicio externo seguro para checkout** (Pasarela de Pago).


---

[‚¨ÖÔ∏è Anterior](../9.4.4/9.4.4.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../9.4.6/9.4.6.md)