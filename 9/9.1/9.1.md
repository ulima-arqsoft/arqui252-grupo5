> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../9.md) ‚Ä∫ [9.1. Revisi√≥n de Entradas](9.1.md)

# 9.1. Revisi√≥n de Entradas

## Casos de uso
| **ID** | **M√≥dulo** | **Nombre del Caso de Uso** | **Historia de Usuario** |
|--------|------------|-----------------------------|---------------------------|
| CU-PL-01 | Generaci√≥n de Playlist | Ingesta de selfie | Yo, como usuario, quiero tomar o cargar una selfie para que la app detecte mi emoci√≥n y genere una playlist acorde a mi estado de √°nimo. |
| CU-PL-02 | Generaci√≥n de Playlist | Selecci√≥n manual de emoci√≥n | Yo, como usuario, quiero seleccionar manualmente mi emoci√≥n cuando no desee usar la c√°mara para avanzar con la generaci√≥n de playlist. |
| CU-PL-03 | Generaci√≥n de Playlist | Normalizaci√≥n de emoci√≥n | Yo, como usuario, quiero que la emoci√≥n detectada se traduzca a par√°metros musicales adecuados para obtener playlists coherentes con mi mood. |
| CU-PL-04 | Generaci√≥n de Playlist | Aplicar reglas por preferencias | Yo, como usuario, quiero que mis preferencias (g√©neros, idioma, d√©cada, duraci√≥n) influyan en la playlist generada. |
| CU-PL-05 | Generaci√≥n de Playlist | Generaci√≥n con semilla h√≠brida | Yo, como usuario, quiero que la playlist combine mi estado emocional con mis artistas favoritos y tendencias actuales. |
| CU-PL-06 | Generaci√≥n de Playlist | Pre-escucha y edici√≥n r√°pida | Yo, como usuario, quiero escuchar un fragmento y reemplazar canciones para personalizar mi playlist r√°pidamente. |
| CU-PL-07 | Generaci√≥n de Playlist | Guardado y versionado | Yo, como usuario, quiero que cada playlist generada se guarde con sus par√°metros para poder revisarla y exportarla. |
| CU-PL-08 | Generaci√≥n de Playlist | Re-generaci√≥n inteligente | Yo, como usuario, quiero re-generar la playlist para obtener nuevas sugerencias manteniendo mi estado emocional. |
| CU-PL-09 | Generaci√≥n de Playlist | Compartir social | Yo, como usuario, quiero compartir mis playlists con portada y enlace en mis redes sociales. |
| CU-PL-10 | Generaci√≥n de Playlist | Manejo de errores de emoci√≥n | Yo, como usuario, quiero continuar con la generaci√≥n aun si falla la detecci√≥n de emoci√≥n. |
| CU-PL-11 | Generaci√≥n de Playlist | L√≠mite por plan | Yo, como usuario, quiero que la app me informe si supero el l√≠mite de playlists seg√∫n mi plan. |
| CU-PL-12 | Generaci√≥n de Playlist | Telemetr√≠a √©tica | Yo, como usuario, quiero que mis datos de uso se registren de forma an√≥nima y segura. |
| CU-PL-13 | Generaci√≥n de Playlist | UI visual por emoci√≥n | Yo, como usuario, quiero que la interfaz cambie seg√∫n mi emoci√≥n para una experiencia m√°s inmersiva. |
| CU-PL-14 | Generaci√≥n de Playlist | Seed local (hora y clima) | Yo, como usuario, quiero que la playlist se adapte a mi contexto (hora/clima) para mejorar la personalizaci√≥n. |
| CU-AU-01 | Autenticaci√≥n y Usuarios | Registro con email y contrase√±a | Yo, como usuario, quiero registrarme usando mi correo y contrase√±a para acceder a la aplicaci√≥n. |
| CU-AU-02 | Autenticaci√≥n y Usuarios | Inicio de sesi√≥n social | Yo, como usuario, quiero iniciar sesi√≥n con Spotify, Google o Apple para acceder r√°pidamente sin crear una contrase√±a. |
| CU-AU-03 | Autenticaci√≥n y Usuarios | Recuperaci√≥n de cuenta | Yo, como usuario, quiero recuperar mi contrase√±a si la olvido. |
| CU-AU-04 | Autenticaci√≥n y Usuarios | Edici√≥n de perfil | Yo, como usuario, quiero actualizar mi alias, foto e informaci√≥n personal. |
| CU-AU-05 | Autenticaci√≥n y Usuarios | Diario y l√≠nea de tiempo | Yo, como usuario, quiero ver mi historial de playlists por d√≠a, emoci√≥n y duraci√≥n. |
| CU-AU-06 | Autenticaci√≥n y Usuarios | Panel de privacidad | Yo, como usuario, quiero controlar qui√©n puede ver mi historial o perfil. |
| CU-AU-07 | Autenticaci√≥n y Usuarios | Gesti√≥n de sesiones | Yo, como usuario, quiero ver en qu√© dispositivos estoy conectado y cerrar sesi√≥n en ellos. |
| CU-AU-08 | Autenticaci√≥n y Usuarios | Consentimientos informados | Yo, como usuario, quiero otorgar o revocar permisos de forma clara y transparente. |
| CU-AU-09 | Autenticaci√≥n y Usuarios | Exportaci√≥n de datos | Yo, como usuario, quiero descargar mis datos en JSON/CSV para tener control de mi informaci√≥n. |
| CU-AU-10 | Autenticaci√≥n y Usuarios | Eliminaci√≥n de cuenta | Yo, como usuario, quiero poder eliminar mi cuenta cuando lo desee. |
| CU-AU-11 | Autenticaci√≥n y Usuarios | Seguridad de acceso | Yo, como usuario, quiero que mi cuenta est√© protegida con rate limiting, bloqueo y 2FA. |
| CU-AU-12 | Autenticaci√≥n y Usuarios | Notificaciones | Yo, como usuario, quiero recibir notificaciones relevantes y configurarlas. |
| CU-AU-13 | Autenticaci√≥n y Usuarios | Accesibilidad | Yo, como usuario con necesidades especiales, quiero que la app sea totalmente accesible. |
| CU-SB-01 | Gesti√≥n de Planes y Suscripciones | Cat√°logo de planes | Yo, como usuario, quiero ver claramente las diferencias entre el plan Free y Premium. |
| CU-SB-02 | Gesti√≥n de Planes y Suscripciones | Checkout seguro | Yo, como usuario, quiero pagar mi suscripci√≥n de forma segura y confiable. |
| CU-SB-03 | Gesti√≥n de Planes y Suscripciones | Renovaci√≥n autom√°tica | Yo, como usuario Premium, quiero que mi plan se renueve autom√°ticamente cada mes. |
| CU-SB-04 | Gesti√≥n de Planes y Suscripciones | Gesti√≥n de m√©todo de pago | Yo, como usuario, quiero a√±adir o cambiar mi tarjeta para futuras renovaciones. |
| CU-SB-05 | Gesti√≥n de Planes y Suscripciones | Dunning / reintentos | Yo, como usuario, quiero que la app reintente un pago fallido antes de cancelar mi plan. |
| CU-SB-06 | Gesti√≥n de Planes y Suscripciones | Periodo de gracia | Yo, como usuario, quiero un tiempo de gracia cuando falla mi pago antes de perder el plan Premium. |
| CU-SB-07 | Gesti√≥n de Planes y Suscripciones | Cambio de plan y prorrata | Yo, como usuario, quiero cambiar entre Free y Premium con un ajuste justo del precio. |
| CU-SB-08 | Gesti√≥n de Planes y Suscripciones | Cancelaci√≥n | Yo, como usuario, quiero cancelar mi suscripci√≥n y mantener beneficios hasta el final del ciclo. |
| CU-SB-09 | Gesti√≥n de Planes y Suscripciones | Reembolsos | Yo, como usuario, quiero solicitar un reembolso seg√∫n la pol√≠tica del servicio. |
| CU-SB-10 | Gesti√≥n de Planes y Suscripciones | Enforcements por plan | Yo, como usuario, quiero conocer mis l√≠mites seg√∫n mi plan (p. ej., playlists/d√≠a). |
| CU-SB-11 | Gesti√≥n de Planes y Suscripciones | Historial de facturaci√≥n | Yo, como usuario, quiero ver mis comprobantes y transacciones. |
| CU-SB-12 | Gesti√≥n de Planes y Suscripciones | Promociones y cupones | Yo, como usuario, quiero aplicar cupones o participar en referidos. |
| CU-PF-01 | Gesti√≥n de Preferencias | Seleccionar g√©neros y artistas favoritos | Yo, como usuario, quiero indicar mis g√©neros y artistas favoritos para influir en mis playlists. |
| CU-PF-02 | Gesti√≥n de Preferencias | Definir duraci√≥n objetivo | Yo, como usuario, quiero escoger la duraci√≥n aproximada de mi playlist. |
| CU-PF-03 | Gesti√≥n de Preferencias | Filtros de idioma y expl√≠citos | Yo, como usuario, quiero filtrar m√∫sica por idioma y excluir contenido expl√≠cito. |
| CU-PF-04 | Gesti√≥n de Preferencias | Selecci√≥n de d√©cadas o √©pocas | Yo, como usuario, quiero definir mis √©pocas favoritas para recibir m√∫sica coherente. |
| CU-PF-05 | Gesti√≥n de Preferencias | Modo descubrimiento | Yo, como usuario, quiero decidir si deseo m√°s canciones nuevas o conocidas. |
| CU-PF-06 | Gesti√≥n de Preferencias | Ritmo del d√≠a | Yo, como usuario, quiero seleccionar perfiles como workout, chill o focus para adaptar energ√≠a y tempo. |
| CU-PF-07 | Gesti√≥n de Preferencias | Tema visual por emoci√≥n | Yo, como usuario, quiero ajustar el estilo visual asociado a cada emoci√≥n. |
| CU-PF-08 | Gesti√≥n de Preferencias | Sincronizaci√≥n cross-device | Yo, como usuario, quiero que mis preferencias se sincronicen entre mis dispositivos. |
| CU-PF-09 | Gesti√≥n de Preferencias | Reset de preferencias | Yo, como usuario, quiero restablecer mis preferencias a valores predeterminados. |
| CU-PF-10 | Gesti√≥n de Preferencias | Importar desde Spotify | Yo, como usuario, quiero importar mis artistas y g√©neros favoritos desde Spotify. |
| CU-IN-01 | Integraci√≥n con Plataformas Externas | OAuth con alcance m√≠nimo | Yo, como usuario, quiero autorizar la conexi√≥n a Spotify solo con los permisos necesarios. |
| CU-IN-02 | Integraci√≥n con Plataformas Externas | Crear playlist en Spotify | Yo, como usuario, quiero que la app cree autom√°ticamente mi playlist dentro de mi cuenta de Spotify. |
| CU-IN-03 | Integraci√≥n con Plataformas Externas | A√±adir y ordenar pistas | Yo, como usuario, quiero que las canciones se agreguen en orden l√≥gico de energ√≠a. |
| CU-IN-04 | Integraci√≥n con Plataformas Externas | Recomendaciones basadas en features | Yo, como usuario, quiero obtener canciones recomendadas mediante atributos musicales. |
| CU-IN-05 | Integraci√≥n con Plataformas Externas | Rate limiting y reintentos | Yo, como usuario, quiero que la app maneje correctamente l√≠mites o errores de la API. |
| CU-IN-06 | Integraci√≥n con Plataformas Externas | Estado de conexi√≥n | Yo, como usuario, quiero saber si mi cuenta Spotify sigue conectada para evitar errores. |
| CU-IN-07 | Integraci√≥n con Plataformas Externas | Sincronizaci√≥n de ediciones | Yo, como usuario, quiero que las ediciones locales de mi playlist se sincronicen con Spotify. |
| CU-IN-08 | Integraci√≥n con Plataformas Externas | Capa vendor-agnostic | Yo, como usuario, quiero que la app pueda integrarse con Apple Music o YouTube Music en el futuro. |
| CU-IN-09 | Integraci√≥n con Plataformas Externas | Manejo de errores y webhooks | Yo, como usuario, quiero que la app detecte expiraci√≥n de tokens y errores sin perder mi progreso. |
| CU-IN-10 | Integraci√≥n con Plataformas Externas | Privacidad de playlist | Yo, como usuario, quiero crear mis playlists como p√∫blicas o privadas seg√∫n prefiera. |
## Atributos de calidad
| ID Escenario | Fuente Est√≠mulo | Est√≠mulo | Artefacto | Entorno | Respuesta | Medida de Respuesta | Comentario |
|---------------|-----------------|-----------|------------|-----------|------------|----------------------|-------------|
| **ESC-01** | Usuario concurrente | El usuario genera o solicita una playlist desde una selfie en hora pico. | Generaci√≥n de Playlist | Carga alta (‚â•500 usuarios simult√°neos) | Procesa la emoci√≥n y genera playlist sin errores. | Tiempo de respuesta < 5 s y sin ca√≠da del servicio. | El QA y backend deben optimizar rendimiento en escenarios pico. |
| **ESC-04** | CTO / Arquitecto | Se requiere actualizar el modelo de IA de detecci√≥n emocional. | Generaci√≥n de Playlist | Entorno de despliegue continuo | Sustituye modelo sin afectar otros m√≥dulos. | Despliegue exitoso sin downtime > 1 min. | El CTO debe garantizar arquitectura desacoplada y mantenible. |
| **ESC-05** | Backend | Transmisi√≥n de emoci√≥n al motor de recomendaci√≥n. | Generaci√≥n de Playlist | Integraci√≥n activa (API interna) | Emoci√≥n enviada correctamente al motor. | Tasa de error < 1 % en llamadas API. | El backend debe asegurar interoperabilidad entre IA y playlist. |
| **ESC-06** | Usuario no autenticado | Intento de acceso no autorizado. | Autenticaci√≥n y Usuarios | Entorno de login | Bloquea acceso y muestra alerta segura. | 100 % de intentos detectados y bloqueados. | El CTO y QA deben reforzar pol√≠ticas de seguridad. |
| **ESC-07** | Usuario | Inicia sesi√≥n con cuenta social (Google/Spotify). | Autenticaci√≥n y Usuarios | Conectividad estable | Autenticaci√≥n completada y perfil cargado. | Tasa de √©xito ‚â• 99 % por proveedor. | El dise√±ador UX/UI debe garantizar flujo intuitivo y sin fricci√≥n. |
| **ESC-08** | Usuario registrado | Solicita recuperaci√≥n de contrase√±a. | Autenticaci√≥n y Usuarios | Entorno web o m√≥vil | Env√≠o seguro de link de recuperaci√≥n. | Link v√°lido ‚â§ 1 min de retraso y caducidad en 10 min. | Soporte y mobile deben mantener confiabilidad del proceso. |
| **ESC-10** | Usuario premium | Ingreso de datos de pago para suscripci√≥n. | Gesti√≥n de Planes y Suscripciones | Entorno de transacci√≥n segura | Datos cifrados en tr√°nsito y reposo. | Cumplimiento PCI-DSS y 0 filtraciones. | El CTO y DBA deben garantizar seguridad y tokenizaci√≥n. |
| **ESC-11** | Usuario premium | Consulta historial de pagos o estado de suscripci√≥n. | Gesti√≥n de Planes y Suscripciones | Sesi√≥n iniciada | Muestra informaci√≥n precisa y legible. | Respuesta < 2 s y 0 errores en carga de datos. | El dise√±ador UX/UI debe mantener transparencia en la interfaz. |
| **ESC-12** | Usuario afectado | Reporta cobro duplicado o error de facturaci√≥n. | Gesti√≥n de Planes y Suscripciones | Entorno de soporte | Soporte accede a logs y corrige transacci√≥n. | Tiempo de resoluci√≥n < 24 h. | Soporte t√©cnico necesita trazas claras y seguras. |
| **ESC-17** | Usuario multi-dispositivo | Modifica datos desde distintos dispositivos. | Gesti√≥n de Preferencias de Usuario | Sincronizaci√≥n concurrente | Sistema resuelve conflicto y mantiene coherencia. | 0 inconsistencias en registros. | El analista de negocio y backend garantizan sincronizaci√≥n coherente. |
| **ESC-18** | Sistema | Registro de cambios o acciones cr√≠ticas. | Gesti√≥n de Preferencias de Usuario | Operaci√≥n normal | Genera logs inmutables con usuario y fecha. | 100 % eventos cr√≠ticos trazados. | El DBA debe mantener trazabilidad segura y auditable. |
| **ESC-19** | Usuario gratuito | Intenta acceder a funci√≥n premium. | Gesti√≥n de Preferencias de Usuario | Sesi√≥n activa | Bloquea acci√≥n y sugiere upgrade. | Respuesta < 1 s y mensaje amigable. | Marketing digital debe manejar upsell sin interrumpir experiencia. |
| **ESC-21** | API externa (Spotify) | Falla o p√©rdida de conexi√≥n durante sincronizaci√≥n. | Integraci√≥n con Plataformas Externas | Red inestable | Reintento autom√°tico y reanudaci√≥n. | Recuperaci√≥n exitosa en ‚â§ 3 intentos. | Backend y mobile deben mantener confiabilidad ante fallos. |
| **ESC-22** | Atacante externo | Intercepta token OAuth o manipula autenticaci√≥n. | Integraci√≥n con Plataformas Externas | Entorno de autenticaci√≥n | Comunicaci√≥n cifrada y verificaci√≥n de firma. | 0 tokens reutilizados o alterados. | CTO y backend deben cumplir protocolo OAuth 2 con certificados v√°lidos. |
| **ESC-24** | Sistema de monitoreo | Detecta falla de sincronizaci√≥n con Spotify. | Integraci√≥n con Plataformas Externas | Ejecuci√≥n normal | Genera alerta y log estructurado. | Alerta enviada en ‚â§ 30 s. | Soporte y analista de datos deben mantener visibilidad total del sistema. |
## Restricciones

| **ID**  | **Nombre**                          | **Descripci√≥n**                                                         |
|--------|--------------------------------------|-------------------------------------------------------------------------|
| CON01  | Arquitectura de Microservicios       | LYRA debe implementarse como un conjunto de microservicios desacoplados. |
| CON02  | Stack Tecnol√≥gico                    | Frontend Flutter, Backend Node.js/Express, BD PostgreSQL.               |
| CON03  | Comunicaci√≥n REST                    | Toda interacci√≥n entre cliente y backend es v√≠a APIs REST.              |
| CON04  | Autenticaci√≥n JWT                    | Uso obligatorio de JWT para sesiones *stateless*.                       |
| CON05  | Integraci√≥n Spotify                  | Requiere OAuth y APIs oficiales de Spotify.                             |
| CON06  | Infraestructura Contenerizada        | Deploy mediante Docker y servicios PaaS/Kubernetes.                     |

## Preocupaciones a nivel de la arquitectura

| **ID**  | **Nombre**                               | **Descripci√≥n**                                                                 |
|--------|-------------------------------------------|---------------------------------------------------------------------------------|
| CRN01  | Escalabilidad del procesamiento emocional | Asegurar capacidad de detecci√≥n masiva de emociones con uso intensivo de IA.    |
| CRN02  | Consistencia en historial y versionado    | Mantener snapshots de playlists sin errores entre dispositivos.                  |
| CRN03  | Seguridad en autenticaci√≥n social         | Manejar proveedores externos con tokens seguros y revocaci√≥n correcta.           |
| CRN04  | Disponibilidad en generaci√≥n masiva       | Sostener picos de generaci√≥n de playlists sin p√©rdida de performance.            |
| CRN05  | Integraci√≥n musical                       | Garantizar que emoci√≥n ‚Üí seed ‚Üí playlist sea coherente y reproducible.           |


---

[üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../9.2/9.2.md)