> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../../9.md) ‚Ä∫ [9.3. Iteraci√≥n 2: Identificar estructuras para soportar la funcionalidad primaria](../9.3.md) ‚Ä∫ [9.3.5. Vistas y Decisiones](9.3.5.md)

# 9.3.5. Vistas y Decisiones

# Vista de M√≥dulos (L√≥gica - Flujo Central)

El flujo de generaci√≥n de playlist queda definido por la interacci√≥n de **5 servicios**:

1. **App Cliente ‚Üí API Gateway**: Env√≠a la selfie.  
2. **API Gateway ‚Üí Emotion-Service**: Petici√≥n s√≠ncrona para detectar emoci√≥n.  
3. **Emotion-Service ‚Üí RabbitMQ**: Publica el resultado de la emoci√≥n.  
4. **Playlist-Engine ‚Üê RabbitMQ**: Consume el evento de emoci√≥n.  
5. **Playlist-Engine**:  
   - Consulta a **Preference-Service** (preferencias del usuario).  
   - Consulta a **Auth-Service** (token de Spotify).  
   - Llama al **API de Spotify** (b√∫squeda y creaci√≥n de playlist).  
6. **Playlist-Engine ‚Üí App Cliente**: Notificaci√≥n/Respuesta (s√≠ncrona o v√≠a webhook en futuras iteraciones) con la **URL de la playlist**.

# Vista de Despliegue (F√≠sica - Adiciones)

Se a√±aden **3 nuevos tipos de contenedores** al cl√∫ster existente (que ya tiene Auth y User):

- **Contenedores Emotion-Service**: M√∫ltiples instancias, posiblemente usando **Python** (por librer√≠as de IA) en lugar de Node.js, demostrando la flexibilidad de los microservicios (**CON01**).  
- **Contenedores Playlist-Engine**: Instancias dedicadas para el procesamiento pesado de recomendaci√≥n.  
- **Servicio Gestionado RabbitMQ**: Una instancia dedicada de alto rendimiento para el bus de mensajes.  
- **Base de Datos NoSQL/JSON**: Servicio de almacenamiento para **Preference-Service**.

---

[‚¨ÖÔ∏è Anterior](../9.3.4/9.3.4.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../9.3.6/9.3.6.md)